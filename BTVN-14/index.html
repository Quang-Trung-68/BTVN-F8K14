<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <img src="./btvn-14.svg" />
    <script>
      // Bài 1: Gom nhóm học sinh theo lớp
      // Kết quả mong muốn:
      // {
      //   "12A1": ["An", "Cường"],
      //   "12A2": ["Bình", "Em"],
      //   "12A3": ["Dung"]
      // }
      
      console.log("\n=====BAI 1=====\n");

      const students = [
        { name: "An", class: "12A1" },
        { name: "Bình", class: "12A2" },
        { name: "Cường", class: "12A1" },
        { name: "Dung", class: "12A3" },
        { name: "Em", class: "12A2" },
      ];

      const results = {};

      for (const student of students) {
        const className = student.class;
        if (!results[className]) {
          results[className] = [];
        }
        results[className].push(student.name);
      }

      console.log(`Results is: \n`);
      console.log(results);

      //       Bài 2: Tìm học sinh điểm cao nhất mỗi lớp

      // const students = [
      //   { name: "An", class: "12A1", score: 8.5 },
      //   { name: "Bình", class: "12A1", score: 9.2 },
      //   { name: "Cường", class: "12A2", score: 7.5 },
      //   { name: "Dung", class: "12A2", score: 9.0 },
      //   { name: "Em", class: "12A3", score: 8.0 }
      // ];

      // Kết quả mong muốn:
      // [
      //   { class: "12A1", topStudent: "Bình", score: 9.2 },
      //   { class: "12A2", topStudent: "Dung", score: 9.0 },
      //   { class: "12A3", topStudent: "Em", score: 8.0 }
      // ]
      console.log("\n=====BAI 2=====\n");
      const students2 = [
        { name: "An", class: "12A1", score: 8.5 },
        { name: "Bình", class: "12A1", score: 9.2 },
        { name: "Cường", class: "12A2", score: 7.5 },
        { name: "Dung", class: "12A2", score: 9.0 },
        { name: "Em", class: "12A3", score: 8.0 },
      ];

      //   Step 1: Grouped student
      const grouped = {};

      for (const student of students2) {
        const className = student.class;

        if (!grouped[className]) {
          grouped[className] = [];
        }
        grouped[className].push(student);
      }

      //   Step 2: Compare score in unique className

      const arrayGrouped = Object.entries(grouped);

      const result2 = [];

      for (const [index, studentsInClass] of arrayGrouped.entries()) {
        let maxScore = 0;
        let resultStudentInClass = {};
        for (const student of studentsInClass[1]) {
          if (maxScore < student.score) {
            resultStudentInClass = {
              class: studentsInClass[0],
              topStudent: student.name,
              score: student.score,
            };
          }
        }
        result2.push(resultStudentInClass);
      }
      console.log("Result 2 is:");
      console.log(result2);

      //       Bài 3: Tính điểm trung bình mỗi lớp

      // const students3 = [
      //   { name: "An", class: "12A1", score: 8.5 },
      //   { name: "Bình", class: "12A1", score: 9.2 },
      //   { name: "Cường", class: "12A2", score: 7.5 },
      //   { name: "Dung", class: "12A2", score: 9.0 },
      //   { name: "Em", class: "12A3", score: 8.0 }
      // ];

      // Kết quả:
      // [
      //   { class: "12A1", averageScore: 8.85 },
      //   { class: "12A2", averageScore: 8.25 },
      //   { class: "12A3", averageScore: 8.0 }
      // ]
      console.log("\n=====BAI 3=====\n");
      const students3 = [
        { name: "An", class: "12A1", score: 8.5 },
        { name: "Bình", class: "12A1", score: 9.2 },
        { name: "Cường", class: "12A2", score: 7.5 },
        { name: "Dung", class: "12A2", score: 9.0 },
        { name: "Em", class: "12A3", score: 8.0 },
      ];

      //   Step 1: Grouped student
      const grouped3 = {};

      for (const student of students3) {
        const className = student.class;
        if (!grouped3[className]) {
          grouped3[className] = [];
        }
        grouped3[className].push(student);
      }

      // Step 2: Calculate avg score every class

      const arrayGrouped3 = Object.entries(grouped3);
      const result3 = [];

      for (const [index, studentsInClass] of arrayGrouped3.entries()) {
        let sumScore3 = 0;
        for (const student of studentsInClass[1]) {
          sumScore3 += student.score;
        }
        let avgScore = sumScore3 / studentsInClass[1].length;
        let avgScoreClass = {
          class: studentsInClass[0],
          averageScore: avgScore,
        };
        result3.push(avgScoreClass);
      }

      console.log("Result 3 is:");
      console.log(result3);
    </script>
  </body>
</html>
